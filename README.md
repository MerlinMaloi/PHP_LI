# PHP_LI

## Веб-приложение для управления ресурсами

### Описание лабораторной работы

Данный проект представляет собой веб-приложение, которое включает в себя механизмы аутентификации пользователей, регистрации, работы с защищенными разделами, создания и поиска ресурсов. Приложение поддерживает роли пользователей, включая администратора, с правами управления данными в базе данных.

Проект реализован на PHP с использованием базы данных MySQL. В качестве дополнительной функции использован механизм сессий для аутентификации.

### Инструкции по запуску проекта
1. Клонирование репозитория:

```
git clone https://github.com/MerlinMaloi/PHP_LI.git

cd PHP_LI
```

2. Настройка базы данных:

- Создайте базу данных, например, с именем web_app_db.

- Импортируйте структуру базы данных, используя файл database.sql, который находится в корневой папке репозитория.

3. Настройка конфигурации:

В файле backend/config/db.php настройте параметры подключения к базе данных (пользователь, пароль, хост и имя базы данных).

4. Установка зависимостей:

- Убедитесь, что у вас установлен PHP и сервер Apache/Nginx. (Для работы с сессиями через Redis установите и настройте Redis сервер).

- Запустите проект через локальный сервер:

```
php -S localhost:8000
```

5. Открытие в браузере:
Откройте браузер и перейдите по адресу: http://localhost:8000
### Документация проекта
#### Содержание
- Аутентификация — регистрация и вход в систему.

- Общедоступный компонент — доступные всем пользователям страницы.

- Форма создания ресурса — для добавления новых ресурсов.

- Форма поиска — для поиска ресурсов.

- (Защищённый компонент — для администраторов, доступен только после входа).

#### Функциональные возможности
1. Регистрация и вход — пользователи могут зарегистрироваться и войти в систему.

- Данные аутентификации хранятся безопасным образом с использованием хеширования паролей.

(Дополнительно предусмотрен механизм восстановления пароля через электронную почту.)

2. Управление пользователями и ролями — администратор может добавлять, редактировать, удалять пользователей, а также назначать роли (пользователь/администратор).

3. Создание, редактирование и удаление ресурсов — пользователи могут создавать новые ресурсы с указанием различных характеристик (название, тип, описание и т.д.), а также редактировать или удалять их, если у них есть соответствующие права.

4. Поиск ресурсов — возможность поиска по названию ресурса.

5. Защищённые разделы — доступ к защищённым разделам доступен только авторизованным пользователям, и только администраторы могут редактировать важные данные.

#### Сценарии взаимодействия пользователей с приложением
- Сценарий 1: Регистрация и вход

1. Пользователь переходит на страницу login.php.

2. Если пользователь не зарегистрирован, он может пройти регистрацию на странице register.php.

3. После успешного входа открывается домашняя страница с доступом к защищённым разделам.

- Сценарий 2: Работа с ресурсами

1. Авторизованный пользователь может перейти на форму создания ресурса.

2. Пользователь заполняет поля формы (название, описание, тип ресурса) и отправляет данные.

3. Ресурс добавляется в базу данных и отображается на странице.

- (Сценарий 3: Управление пользователями (для администратора)

Администратор может зайти в раздел "Управление пользователями".

В разделе можно просматривать всех пользователей, редактировать их данные, назначать роли.)

###3 Примерная структура базы данных
**Таблица `users`:**

```
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    role ENUM('user', 'admin') DEFAULT 'user',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**Таблица `resources`:**

```
CREATE TABLE resources (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    type VARCHAR(50),
    description TEXT,
    category VARCHAR(100),
    created_by INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (created_by) REFERENCES users(id)
);
```

#### Примеры использования проекта
- **Регистрация нового пользователя:**

1. Перейдите на страницу register.php.

2. Введите ваш email и пароль.

3. Нажмите кнопку "Зарегистрироваться".

**Поиск ресурсов:**

1. На главной странице используйте форму поиска.

2. Введите ключевые слова и нажмите "Искать".

3. Список ресурсов, соответствующих запросу, будет отображён ниже.

#### Ответы на контрольные вопросы
1. Как реализована аутентификация?

- Аутентификация реализована через форму входа, с использованием сессий и безопасного хеширования паролей с помощью password_hash и password_verify.

2. Какие роли пользователей предусмотрены?

- Роли user (и admin). Администратор имеет доступ к дополнительным функциям, включая управление пользователями и ресурсами.

3. Как защищены данные пользователей?

- Все пароли пользователей хешируются перед хранением в базе данных, используется защищённое соединение (HTTP) для передачи данных.

#### Список использованных источников
- Документация PHP

- Руководство по PDO

(Документация по Redis для PHP в планах как и Mongo)
